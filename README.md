# TON Deep Documentation
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –¢–û–ù–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–∞–∫ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. 

–ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—ã–ª–∞ –≤–∞–º –ø–æ–ª–µ–∑–Ω–∞, –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø–æ–¥–æ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –º–æ–∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ª—é–±—É—é —Å—É–º–º—É –≤ üíé TON –Ω–∞ –∞–¥—Ä–µ—Å `EQBLS8WneoKVGrwq2MO786J6ruQNiv62NXr8Ko_l5Ttondoc` üòä

## ADNL
–≠—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–∏–∂–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤ —Å–µ—Ç–∏ TON, –æ–Ω –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–≤–µ—Ä—Ö –ª—é–±–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–æ —á–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö TCP –∏ UDP. UDP –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏, –∞ TCP –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å lite-–∫–ª–∏–µ–Ω—Ç–∞–º–∏. –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–µ–ª–∞–µ—Ç—Å—è —É–ø–æ—Ä —Ç–æ–ª—å–∫–æ –Ω–∞ TCP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

–í–º–µ—Å—Ç–æ –∞–¥—Ä–µ—Å–æ–≤, —É–∑–ª—ã —Å–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ ed25519 –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—â–∏–π –∫–ª—é—á, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –î–∏—Ñ—Ñ–∏-–•–µ–ª–º–∞–Ω–∞ –¥–ª—è —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –∫—Ä–∏–≤—ã—Ö - ECDH.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤
–ö–∞–∂–¥—ã–π ADNL –ø–∞–∫–µ—Ç, –∫—Ä–æ–º–µ —Ö—ç–Ω–¥—à–µ–π–∫–∞, –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
* 4 –±–∞–π—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–∞ –≤ little endian (N)
* 32 –±–∞–π—Ç–∞ nonce [[?]](## "–°–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã, –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫ –Ω–∞ —á–µ–∫—Å—É–º–º—É")
* (N - 64) –±–∞–π—Ç –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* 32 –±–∞–π—Ç–∞ —á–µ–∫—Å—É–º–º–∞ SHA256 –æ—Ç nonce –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í–µ—Å—å –ø–∞–∫–µ—Ç, –≤–∫–ª—é—á–∞—è —Ä–∞–∑–º–µ—Ä, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω **AES-CTR**.
–ü–æ—Å–ª–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ - –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —á–µ–∫—Å—É–º–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å —á–µ–∫—Å—É–º–º—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ç–µ–º, —á—Ç–æ —É –Ω–∞—Å –≤ –ø–∞–∫–µ—Ç–µ.

–•—ç–Ω–¥—à–µ–π–∫ –ø–∞–∫–µ—Ç - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —á–∞—Å—Ç–∏—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –∏ –æ–ø–∏—Å–∞–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ.


### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å ip, –ø–æ—Ä—Ç –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞, –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á ed25519. 

–î–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ç–∞–∫–∏–µ –∫–∞–∫ ip, –ø–æ—Ä—Ç –∏ –∫–ª—é—á –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ [–∫–æ–Ω—Ñ–∏–≥–∞](https://ton-blockchain.github.io/global.config.json). –ê–π–ø–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –≤ —á–∏—Å–ª–æ–≤–æ–º –≤–∏–¥–µ, –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –≤–∏–¥ –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—è, –Ω–∞–ø—Ä–∏–º–µ—Ä [—ç—Ç–æ—Ç –∏–Ω—Å—Ç—É—Ä–º–µ–Ω—Ç](https://www.browserling.com/tools/dec-to-ip). –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ –∫–æ–Ω—Ñ–∏–≥–µ –≤ base64 —Ñ–æ—Ä–º–∞—Ç–µ.

–ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 160 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç, —á–∞—Å—Ç—å –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤—ã –¥–ª—è AES —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. 

–ò–∑ –Ω–∏—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è 2 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö AES-CTR —à–∏—Ñ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ —Ö—ç–Ω–¥—à–µ–π–∫–∞.
* –®–∏—Ñ—Ä A - –∫–ª—é—á 0 - 31 –±–∞–π—Ç—ã, iv 64 - 79 –±–∞–π—Ç—ã
* –®–∏—Ñ—Ä B - –∫–ª—é—á 32 - 63 –±–∞–π—Ç—ã, iv 80 - 95 –±–∞–π—Ç—ã

–®–∏—Ñ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:
* –®–∏—Ñ—Ä A –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
* –®–∏—Ñ—Ä A –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
* –®–∏—Ñ—Ä B –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
* –®–∏—Ñ—Ä B –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ö—ç–Ω–¥—à–µ–π–∫ –ø–∞–∫–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
* [32 –±–∞–π—Ç–∞] **–ê–π–¥–∏ –∫–ª—é—á–∞ —Å–µ—Ä–≤–µ—Ä–∞** [[–ü–æ–¥—Ä–æ–±–Ω–µ–µ]](#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B0%D0%B9%D0%B4%D0%B8-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0)
* [32 –±–∞–π—Ç–∞] **–ù–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á ed25519**
* [32 –±–∞–π—Ç–∞] **SHA256 —Ö—ç—à –æ—Ç –Ω–∞—à–∏—Ö 160 –±–∞–π—Ç**
* [160 –±–∞–π—Ç] **–ù–∞—à–∏ 160 –±–∞–π—Ç –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–º –≤–∏–¥–µ** [[–ü–æ–¥—Ä–æ–±–Ω–µ–µ]](#%D1%88%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-handshake-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0)


–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ö—ç–Ω–¥—à–µ–π–∫ –ø–∞–∫–µ—Ç–∞, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–µ–ª–∞–µ—Ç —Ç–µ –∂–µ —Å–∞–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —É —Å–µ–±—è, –ø–æ–ª—É—á–∏—Ç ECDH –∫–ª—é—á, —Ä–∞—Å—à–∏—Ñ—Ä—É–µ—Ç 160 –±–∞–π—Ç –∏ —Å–æ–∑–¥–∞—Å—Ç 2 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª—é—á–∞. –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è, —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç –ø—É—Å—Ç—ã–º ADNL –ø–∞–∫–µ—Ç–æ–º, –±–µ–∑ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ (–∞ —Ç–∞–∫–∂–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —à–∏—Ñ—Ä–æ–≤. 

–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º.

## –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –∏ TL —Å—Ö–µ–º—ã
–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –º—ã –º–æ–∂–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —è–∑—ã–∫ TL.

TL (Type Language) - —ç—Ç–æ —è–∑—ã–∫ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

–î–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è [TL —Å—Ö–µ–º—ã](https://github.com/ton-blockchain/ton/tree/master/tl/generate/scheme) –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ - –∞–π–¥–∏ —Å—Ö–µ–º—ã –≤ little endian, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è, –∫–∞–∫ crc32 —Å —Ç–∞–±–ª–∏—Ü–µ–π IEEEE –æ—Ç —Å—Ö–µ–º—ã.

TL –æ–ø–µ—Ä–∏—Ä—É–µ—Ç 32 –±–∏—Ç–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ TL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–µ–Ω 4 –±–∞–π—Ç–∞–º. –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –∫—Ä–∞—Ç–µ–Ω 4, –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–≤—ã—Ö –±–∞–π—Ç –¥–æ –∫—Ä–∞—Ç–Ω–æ—Å—Ç–∏. 

–î–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫ Little Endian.

–ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ TL –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Telegram](https://core.telegram.org/mtproto/TL) (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Ping&Pong
Ping –ø–∞–∫–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 5 —Å–µ–∫—É–Ω–¥. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –ø–æ–∫–∞ –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∏–Ω–∞—á–µ —Å–µ—Ä–≤–µ—Ä –æ–±–æ—Ä–≤–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

Ping –ø–∞–∫–µ—Ç, –∫–∞–∫ –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ, —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ö–µ–º–µ, –æ–ø–∏—Å–∞–Ω–Ω–æ–π [–≤—ã—à–µ](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø–∞–∫–µ—Ç–æ–≤), –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Å–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏ –∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å–∞. 

–ù–∞–π–¥–µ–º –Ω—É–∂–Ω—É—é —Å—Ö–µ–º—É –¥–ª—è –ø–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞ [—Ç—É—Ç](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/ton_api.tl#L35) –∏ –≤—ã—á–∏—Å–ª–∏–º –∞–π–¥–∏ —Å—Ö–µ–º—ã, –∫–∞–∫
`crc32_IEEEE("tcp.ping random_id:long = tcp.Pong")`. –ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –±–∞–π—Ç—ã —Å –ø–æ—Ä—è–¥–∫–æ–º little endian –ø–æ–ª—É—á–∏–º **9a2b084d**.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–∞—à ADNL ping –ø–∞–∫–µ—Ç –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
* 4 –±–∞–π—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–∞ –≤ little endian -> 64 + (4+8) = **76**
* 32 –±–∞–π—Ç–∞ nonce -> —Å–ª—É—á–∞–π–Ω—ã–µ 32 –±–∞–π—Ç–∞
* 4 –±–∞–π—Ç–∞ ID TL —Å—Ö–µ–º—ã -> **9a2b084d**
* 8 –±–∞–π—Ç –∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å–∞ -> —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ uint64 
* 32 –±–∞–π—Ç–∞ —á–µ–∫—Å—É–º–º–∞ SHA256 –æ—Ç nonce –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞—à –ø–∞–∫–µ—Ç –∏ –≤ –æ—Ç–≤–µ—Ç –∂–¥–µ–º [tcp.pong](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/ton_api.tl#L23), `random_id` –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω —Ç–æ–º—É, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –≤ ping.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç –ª–∞–π—Ç —Å–µ—Ä–≤–µ—Ä–∞
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –±–ª–æ–∫—á–µ–∏–Ω–∞, –æ–±–µ—Ä–Ω—É—Ç—ã –≤ [LiteServer Query](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L83) —Å—Ö–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ [ADNL Query](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L22) —Å—Ö–µ–º—É.

LiteQuery:
`liteServer.query data:bytes = Object`, –∞–π–¥–∏ **df068c79**

ADNLQuery:
`adnl.message.query query_id:int256 query:bytes = adnl.Message`, –∞–π–¥–∏ **7af98bb4**

LiteQuery –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ ADNLQuery, –∫–∞–∫ `query:bytes`, –∞ –∫–æ–Ω–µ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ LiteQuery, –∫–∞–∫ `data:bytes`.

##### –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ bytes –≤ TL
–î–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç –Ω–∞–º –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ —Ä–∞–∑–º–µ—Ä. –ï—Å–ª–∏ –æ–Ω –º–µ–Ω—å—à–µ —á–µ–º 254 –±–∞–π—Ç–∞, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å 1 –±–∞–π—Ç–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–º–µ—Ä–∞. –ï—Å–ª–∏ –±–æ–ª—å—à–µ, —Ç–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ –ø–∏—à–µ—Ç—Å—è 0xFE, –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –±–æ–ª—å—à–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, –∏ —É–∂–µ –ø–æ—Å–ª–µ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—Ç 3 –±–∞–π—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –∫–æ–¥–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ `[0xAA, 0xBB]`, –µ–≥–æ —Ä–∞–∑–º–µ—Ä 2. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 1 –±–∞–π—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏ –¥–∞–ª–µ–µ –ø–∏—à–µ–º —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–∞–µ–º `[0x02, 0xAA, 0xBB]`, –≥–æ—Ç–æ–≤–æ, –Ω–æ –º—ã –≤–∏–¥–∏–º, —á—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–≤–µ–Ω 3 –∏ –Ω–µ –∫—Ä–∞—Ç–µ–Ω 4–º –±–∞–π—Ç–∞–º, —Ç–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å 1 –±–∞–π—Ç –ø–∞–¥–¥–∏–Ω–≥–∞, —á—Ç–æ–±—ã –±—ã–ª–æ 4. –ü–æ–ª—É—á–∞–µ–º: `[0x02, 0xAA, 0xBB, 0x00]`.

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤, —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä, 396, –º—ã –ø–æ—Å—Ç—É–ø–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: 396 >= 254, –∑–Ω–∞—á–∏—Ç –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 3 –±–∞–π—Ç–∞ –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ 1 –±–∞–π—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–≤—ã—à–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ–º: `[0xFE, 0x8C, 0x01, 0x00, –±–∞–π—Ç—ã –º–∞—Å—Å–∏–≤–∞]`, 396+4 = 400, —á—Ç–æ –∫—Ä–∞—Ç–Ω–æ 4, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–¢–µ–ø–µ—Ä—å, —Ç–∞–∫ –∫–∞–∫ –º—ã —É–∂–µ —É–º–µ–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å TL –ø–∞–∫–µ—Ç—ã –¥–ª—è Lite API, –º—ã –º–æ–∂–µ–º –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –±–ª–æ–∫–µ –º–∞—Å—Ç–µ—Ä—á–µ–∏–Ω–∞ TON. –ë–ª–æ–∫ –º–∞—Å—Ç–µ—Ä—á–µ–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö, –∫–∞–∫ –≤—Ö–æ–¥—è—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–º–æ–º–µ–Ω—Ç–∞), –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–º –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.

##### getMasterchainInfo
–ò—â–µ–º –Ω—É–∂–Ω—É—é –Ω–∞–º [TL —Å—Ö–µ–º—É](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L60), –≤—ã—á–∏—Å–ª—è–µ–º –µ–µ –∞–π–¥–∏ –∏ —Å—Ç—Ä–æ–∏–º –ø–∞–∫–µ—Ç:

* 4 –±–∞–π—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–∞ –≤ little endian -> 64 + (4+32+(1+4+(1+4+3)+3)) = **116**
* 32 –±–∞–π—Ç–∞ nonce -> —Å–ª—É—á–∞–π–Ω—ã–µ 32 –±–∞–π—Ç–∞
* 4 –±–∞–π—Ç–∞ ID ADNLQuery —Å—Ö–µ–º—ã -> **7af98bb4**
* 32 –±–∞–π—Ç–∞ `query_id:int256` -> —Å–ª—É—á–∞–π–Ω—ã–µ 32 –±–∞–π—Ç–∞
* * 1 –±–∞–π—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ -> **12**
* * 4 –±–∞–π—Ç–∞ ID LiteQuery —Å—Ö–µ–º—ã -> **df068c79**
* * * 1 –±–∞–π—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ -> **4**
* * * 4 –±–∞–π—Ç–∞ ID getMasterchainInfo —Å—Ö–µ–º—ã -> **2ee6b589**
* * * 3 –Ω—É–ª–µ–≤—ã—Ö –±–∞–π—Ç–∞ –ø–∞–¥–∏–Ω–≥–∞ (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∫ 8)
* * 3 –Ω—É–ª–µ–≤—ã—Ö –±–∞–π—Ç–∞ –ø–∞–¥–∏–Ω–≥–∞ (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∫ 16)
* 32 –±–∞–π—Ç–∞ —á–µ–∫—Å—É–º–º–∞ SHA256 –æ—Ç nonce –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –≤ hex:
```
74000000                                                             -> —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ (116)
5fb13e11977cb5cff0fbf7f23f674d734cb7c4bf01322c5e6b928c5d8ea09cfd     -> nonce
  7af98bb4                                                           -> ADNLQuery
  77c1545b96fa136b8e01cc08338bec47e8a43215492dda6d4d7e286382bb00c4   -> query_id
    0c                                                               -> —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞
    df068c79                                                         -> LiteQuery
      04                                                             -> —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞
      2ee6b589                                                       -> getMasterchainInfo
      000000                                                         -> 3 –±–∞–π—Ç–∞ –ø–∞–¥–∏–Ω–≥
    000000                                                           -> 3 –±–∞–π—Ç–∞ –ø–∞–¥–∏–Ω–≥
ac2253594c86bd308ed631d57a63db4ab21279e9382e416128b58ee95897e164     -> sha256
```

–í –æ—Ç–≤–µ—Ç –º—ã –æ–∂–∏–¥–∞–µ–º –ø–æ–ª—É—á–∏—Ç—å [liteServer.masterchainInfo](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L30), —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ last:[ton.blockIdExt](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/tonlib_api.tl#L51) state_root_hash:int256 –∏ init:[tonNode.zeroStateIdExt](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/ton_api.tl#L359).

–ü–æ–ª—É—á–µ–Ω—ã–π –ø–∞–∫–µ—Ç –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–µ–º –∂–µ —Å–∞–º—ã–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã–π, - —Ç–æ—Ç –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º, –Ω–æ –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É, —Ä–∞–∑–≤–µ —á—Ç–æ –æ—Ç–≤–µ—Ç –∑–∞–≤–µ—Ä–Ω—É—Ç —Ç–æ–ª—å–∫–æ –≤ [ADNLAnswer](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L23).

–ü–æ—Å–ª–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞, –ø–æ–ª—É—á–∞–µ–º –ø–∞–∫–µ—Ç –≤–∏–¥–∞:
```
20010000                                                                  -> —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ (288)
5558b3227092e39782bd4ff9ef74bee875ab2b0661cf17efdfcd4da4e53e78e6          -> nonce
  1684ac0f                                                                -> ADNLAnswer
  77c1545b96fa136b8e01cc08338bec47e8a43215492dda6d4d7e286382bb00c4        -> query_id (–∏–¥–µ–Ω—Ç–∏—á–µ–Ω –∑–∞–ø—Ä–æ—Å—É)
    b8                                                                    -> —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞
    81288385                                                              -> liteServer.masterchainInfo
                                                                          last:tonNode.blockIdExt
        ffffffff                                                          -> workchain:int
        0000000000000080                                                  -> shard:long
        27405801                                                          -> seqno:int   
        e585a47bd5978f6a4fb2b56aa2082ec9deac33aaae19e78241b97522e1fb43d4  -> root_hash:int256
        876851b60521311853f59c002d46b0bd80054af4bce340787a00bd04e0123517  -> file_hash:int256
      8b4d3b38b06bb484015faf9821c3ba1c609a25b74f30e1e585b8c8e820ef0976    -> state_root_hash:int256
                                                                          init:tonNode.zeroStateIdExt 
        ffffffff                                                          -> workchain:int
        17a3a92992aabea785a7a090985a265cd31f323d849da51239737e321fb05569  -> root_hash:int256      
        5e994fcf4d425c0a6ce6a792594b7173205f740a39cd56f537defd28b48a0f6e  -> file_hash:int256
    000000                                                                -> –ø–∞–¥–∏–Ω–≥ 3 –±–∞–π—Ç–∞
520c46d1ea4daccdf27ae21750ff4982d59a30672b3ce8674195e8a23e270d21          -> sha256
```

##### runSmcMethod
–ú—ã —É–∂–µ —É–º–µ–µ–º –ø–æ–ª—É—á–∞—Ç—å –±–ª–æ–∫ –º–∞—Å—Ç–µ—Ä—á–µ–∏–Ω–∞, –∑–Ω–∞—á–∏—Ç —Ç–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –≤—ã–∑—ã–≤–∞—Ç—å –ª—é–±—ã–µ –º–µ—Ç–æ–¥—ã –ª–∞–π—Ç-—Å–µ—Ä–≤–µ—Ä–∞.
–†–∞–∑–±–µ—Ä–µ–º **runSmcMethod** - —ç—Ç–æ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ó–¥–µ—Å—å –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏–µ –∫–∞–∫ [TL-B](https://ton.org/docs/#/overviews/TL-B), [Cell](https://ton.org/docs/#/overviews/Cells) –∏ [BoC](#bag-of-cells).

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ TL —Å—Ö–µ–º–µ:
`liteServer.runSmcMethod mode:# id:tonNode.blockIdExt account:liteServer.accountId method_id:long params:bytes = liteServer.RunMethodResult`

–ò –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç –≤–∏–¥–∞:
`liteServer.runMethodResult mode:# id:tonNode.blockIdExt shardblk:tonNode.blockIdExt shard_proof:mode.0?bytes proof:mode.0?bytes state_proof:mode.1?bytes init_c7:mode.3?bytes lib_extras:mode.4?bytes exit_code:int result:mode.2?bytes = liteServer.RunMethodResult;`

–í –∑–∞–ø—Ä–æ—Å–µ –º—ã –≤–∏–¥–∏–º —Ç–∞–∫–∏–µ –ø–æ–ª—è:
1. mode:# - uint32 –±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –≤–∏–¥–µ—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, result:mode.2?bytes –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –±–∏—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º 2 —Ä–∞–≤–µ–Ω –µ–¥–∏–Ω–∏—Ü–µ.
2. id:tonNode.blockIdExt - –Ω–∞—à —Å—Ç–µ–π—Ç –º–∞—Å—Ç–µ—Ä –±–ª–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–π –≥–ª–∞–≤–µ.
3. account:[liteServer.accountId](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L27) - –≤–æ—Ä–∫—á–µ–∏–Ω –∏ –¥–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.
4. method_id:long - 8 –±–∞–π—Ç, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø–∏—à–µ—Ç—Å—è crc16 —Å —Ç–∞–±–ª–∏—Ü–µ–π XMODEM –æ—Ç –∏–º–µ–Ω–∏ –≤—ã–∑—ã–≤–∞–µ–º–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã–π 17–π –±–∏—Ç [[–†–∞—Å—á–µ—Ç]](https://github.com/xssnick/tonutils-go/blob/88f83bc3554ca78453dd1a42e9e9ea82554e3dd2/ton/runmethod.go#L16)
5. params:bytes - [Stack](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L783) —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã–π –≤ [BoC](#bag-of-cells), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞. [[–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏]](https://github.com/xssnick/tonutils-go/blob/88f83bc3554ca78453dd1a42e9e9ea82554e3dd2/tlb/stack.go)

–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ `result:mode.2?bytes`, —Ç–æ–≥–¥–∞ –Ω–∞—à mode –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 0b100, —Ç–æ –µ—Å—Ç—å 4. –í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∏–º:
1. mode:# -> —Ç–æ, —á—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏, - 4.
2. id:tonNode.blockIdExt -> –Ω–∞—à –º–∞—Å—Ç–µ—Ä –±–ª–æ–∫, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –º–µ—Ç–æ–¥
3. shardblk:tonNode.blockIdExt -> —à–∞—Ä–¥ –±–ª–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
4. exit_code:int -> 4 –±–∞–π—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –∫–æ–¥–æ–º –≤—ã—Ö–æ–¥–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–∞. –ï—Å–ª–∏ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ, —Ç–æ = 0, –µ—Å–ª–∏ –Ω–µ—Ç - —Ä–∞–≤–µ–Ω –∫–æ–¥—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è
5. result:mode.2?bytes -> [Stack](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L783) —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã–π –≤ [BoC](#bag-of-cells), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–º –∑–Ω–∞—á–µ–Ω–∏—è.

–†–∞–∑–±–µ—Ä–µ–º –≤—ã–∑–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç –º–µ—Ç–æ–¥–∞ `a2` –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `EQBL2_3lMiyywU17g-or8N7v9hDmPCpttzBPE2isF2GTzpK4`:

–ö–æ–¥ –º–µ—Ç–æ–¥–∞ –Ω–∞ FunC:
```
(cell, cell) a2() method_id {
  cell a = begin_cell().store_uint(0xAABBCC8, 32).end_cell();
  cell b = begin_cell().store_uint(0xCCFFCC1, 32).end_cell();
  return (a, b);
}
```

–ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—à –∑–∞–ø—Ä–æ—Å:
* `mode` = 4, –Ω–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç -> `04000000`
* `id` = —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è getMasterchainInfo
* `account` = –≤–æ—Ä–∫—á–µ–∏–Ω 0 (4 –±–∞–π—Ç–∞ `00000000`), –∏ int256 [–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –∞–¥—Ä–µ—Å–∞ –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞](#–ê–¥—Ä–µ—Å–∞), —Ç–æ –µ—Å—Ç—å 32 –±–∞–π—Ç–∞ `4bdbfde5322cb2c14d7b83ea2bf0deeff610e63c2a6db7304f1368ac176193ce`
* `method_id` = [–≤—ã—á–∏—Å–ª–µ–Ω—ã–π](https://github.com/xssnick/tonutils-go/blob/88f83bc3554ca78453dd1a42e9e9ea82554e3dd2/ton/runmethod.go#L16) id –æ—Ç `a2` -> `0a2e010000000000`
* `params:bytes` = –ù–∞—à –º–µ—Ç–æ–¥ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∑–Ω–∞—á–∏—Ç –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–º—É –ø—É—Å—Ç–æ–π —Å—Ç–µ–∫ (`000000`, —è—á–µ–π–∫–∞ 3 –±–∞–π—Ç–∞ - —Å—Ç–µ–∫ 0 –≥–ª—É–±–∏–Ω—ã) —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã–π –≤ [BoC](#bag-of-cells) -> `b5ee9c72010101010005000006000000` -> —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –≤ bytes –∏ –ø–æ–ª—É—á–∞–µ–º `10b5ee9c72410101010005000006000000000000` 0x10 - —Ä–∞–∑–º–µ—Ä, 3 –±–∞–π—Ç–∞ –≤ –∫–æ–Ω—Ü–µ - –ø–∞–¥–∏–Ω–≥.

–í –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—É—á–∞–µ–º:
* `mode:#` -> –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω
* `id:tonNode.blockIdExt` -> –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω
* `shardblk:tonNode.blockIdExt` -> –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω
* `exit_code:int` -> —Ä–∞–≤–µ–Ω 0, –µ—Å–ª–∏ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ
* `result:mode.2?bytes` -> [Stack](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L783) —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ BoC, –µ–≥–æ –º—ã —Ä–∞—Å–ø–∞–∫—É–µ–º.

–í–Ω—É—Ç—Ä–∏ `result` –º—ã –ø–æ–ª—É—á–∏–ª–∏ `b5ee9c7201010501001b000208000002030102020203030400080ccffcc1000000080aabbcc8`, —ç—Ç–æ [BoC](#bag-of-cells) —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Ç–µ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏. –ö–æ–≥–¥–∞ –º—ã –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –µ–≥–æ, –º—ã –ø–æ–ª—É—á–∏–º —è—á–µ–π–∫—É:
```
32[00000203] -> {
  8[03] -> {
    0[],
    32[0AABBCC8]
  },
  32[0CCFFCC1]
}
```
–ï—Å–ª–∏ –º—ã –µ–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–º, —Ç–æ –ø–æ–ª—É—á–∏–º 2 –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ cell, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—à FunC –º–µ—Ç–æ–¥. 
–ü–µ—Ä–≤—ã–µ 3 –±–∞–π—Ç–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —è—á–µ–π–∫–∏ `000002` - —ç—Ç–æ –≥–ª—É–±–∏–Ω–∞ —Å—Ç–µ–∫–∞, —Ç–æ –µ—Å—Ç—å 2. –ó–Ω–∞—á–∏—Ç –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω—É–ª –Ω–∞–º 2 –∑–Ω–∞—á–µ–Ω–∏—è. 

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥, —Å–ª–µ–¥—É—é—â–∏–µ 8 –±–∏—Ç (1 –±–∞–π—Ç) - —ç—Ç–æ —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ç–µ–∫—É—â–µ–º —É—Ä–æ–≤–Ω–µ —Å—Ç–µ–∫–∞. –î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–∏–ø–æ–≤ –æ–Ω –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å 2 –±–∞–π—Ç–∞. –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ [—Å—Ö–µ–º–µ](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L766). –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã –∏–º–µ–µ–º `03`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
```
vm_stk_cell#03 cell:^Cell = VmStackValue;
```
–ó–Ω–∞—á–∏—Ç —Ç–∏–ø –Ω–∞—à–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è - cell, –∏, —Å—É–¥—è –ø–æ —Å—Ö–µ–º–µ, –æ–Ω —Ö—Ä–∞–Ω–∏—Ç —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–∞–∫ —Å—Å—ã–ª–∫—É. –ù–æ, –µ—Å–ª–∏ –º—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å—Ö–µ–º—É —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–µ–∫–∞, -
```
vm_stk_cons#_ {n:#} rest:^(VmStackList n) tos:VmStackValue = VmStackList (n + 1);
```
–¢–æ —É–≤–∏–¥–∏–º, —á—Ç–æ –ø–µ—Ä–≤–∞—è —Å—Å—ã–ª–∫–∞ `rest:^(VmStackList n)` - —ç—Ç–æ —è—á–µ–π–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å—Ç–µ–∫–µ, –∞ –Ω–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ `tos:VmStackValue` –∏–¥–µ—Ç –≤—Ç–æ—Ä—ã–º, –∑–Ω–∞—á–∏—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–º –Ω—É–∂–Ω–æ —á–∏—Ç–∞—Ç—å –≤—Ç–æ—Ä—É—é —Å—Å—ã–ª–∫—É, —Ç–æ –µ—Å—Ç—å `32[0CCFFCC1]` - —ç—Ç–æ –Ω–∞—à –ø–µ—Ä–≤—ã–π cell, –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–Ω—É–ª –∫–æ–Ω—Ç—Ä–∞–∫—Ç.

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∑–∞–ª–µ–∑—Ç—å –≥–ª—É–±–∂–µ –∏ –¥–æ—Å—Ç–∞—Ç—å –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–µ–∫–∞, –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –ø–µ—Ä–≤–æ–π —Å—Å—ã–ª–∫–µ, —Ç–µ–ø–µ—Ä—å –º—ã –∏–º–µ–µ–º:
```
8[03] -> {
    0[],
    32[0AABBCC8]
  }
```
–ü–æ–≤—Ç–æ—Ä—è–µ–º —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ü–µ—Å—Å. –ü–µ—Ä–≤—ã–µ 8 –±–∏—Ç = `03` - —Ç–æ –µ—Å—Ç—å –æ–ø—è—Ç—å cell. –í—Ç–æ—Ä–∞—è —Å—Å—ã–ª–∫–∞ - —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ `32[0AABBCC8]` –∏, —Ç–∞–∫ –∫–∞–∫ –≥–ª—É–±–∏–Ω–∞ –Ω–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞ —Ä–∞–≤–Ω–∞ 2, –º—ã –∑–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ—Ö–æ–¥. –ò—Ç–æ–≥–æ, –º—ã –∏–º–µ–µ–º 2 –∑–Ω–∞—á–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º, - `32[0CCFFCC1]` –∏ `32[0AABBCC8]`. 

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–Ω–∏ –∏–¥—É—Ç –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ - –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã –≤–∏–¥–∏–º –≤ –∫–æ–¥–µ FunC. 

[–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](https://github.com/xssnick/tonutils-go/blob/master/ton/runmethod.go#L24)
##### getAccountState
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞, —Ç–∞–∫–∏—Ö –∫–∞–∫ –±–∞–ª–∞–Ω—Å, –∫–æ–¥ –∏ —Ö—Ä–∞–Ω–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [getAccountState](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L68). –î–ª—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è [—Å–≤–µ–∂–∏–π –º–∞—Å—Ç–µ—Ä –±–ª–æ–∫](#) –∏ –∞–¥—Ä–µ—Å –∞–∫–∫–∞—É–Ω—Ç–∞. –í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∏–º TL —Å—Ç—Ä—É–∫—Ç—É—Ä—É [AccountState](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/lite_api.tl#L38).

–†–∞–∑–±–µ—Ä–µ–º AccountState TL —Å—Ö–µ–º—É:
```
liteServer.accountState id:tonNode.blockIdExt shardblk:tonNode.blockIdExt shard_proof:bytes proof:bytes state:bytes = liteServer.AccountState;
```
1. `id` - —ç—Ç–æ –Ω–∞—à –º–∞—Å—Ç–µ—Ä –±–ª–æ–∫, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ.
2. `shardblk` - –±–ª–æ–∫ —à–∞—Ä–¥—ã –≤–æ—Ä–∫—á–µ–∏–Ω–∞ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞—à –∞–∫–∫–∞—É–Ω—Ç, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ.
3. `shard_proof` - merkle –ø—Ä—É—Ñ –±–ª–æ–∫–∞ —à–∞—Ä–¥—ã.
4. `proof` - merkle –ø—Ä—É—Ñ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞.
5. `state` - [BoC](#bag-of-cells) TLB [—Å—Ö–µ–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L232).

–ò–∑ –≤—Å–µ—Ö —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–æ —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `state`, —Ä–∞–∑–±–µ—Ä–µ–º –µ–≥–æ. 

–ù–∞–ø—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ TF `EQAhE3sLxHZpsyZ_HecMuwzvXHKLjYx4kEUehhOy2JmCcHCT`, `state` –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç:
```
b5ee9c720102350100051e000277c0021137b0bc47669b3267f1de70cbb0cef5c728b8d8c7890451e8613b2d899827026a886043179d3f6000006e233be8722201d7d239dba7d818134001020114ff00f4a413f4bcf2c80b0d021d0000000105036248628d00000000e003040201cb05060013a03128bb16000000002002012007080043d218d748bc4d4f4ff93481fd41c39945d5587b8e2aa2d8a35eaf99eee92d9ba96004020120090a0201200b0c00432c915453c736b7692b5b4c76f3a90e6aeec7a02de9876c8a5eee589c104723a18020004307776cd691fbe13e891ed6dbd15461c098b1b95c822af605be8dc331e7d45571002000433817dc8de305734b0c8a3ad05264e9765a04a39dbe03dd9973aa612a61f766d7c02000431f8c67147ceba1700d3503e54c0820f965f4f82e5210e9a3224a776c8f3fad1840200201200e0f020148101104daf220c7008e8330db3ce08308d71820f90101d307db3c22c00013a1537178f40e6fa1f29fdb3c541abaf910f2a006f40420f90101d31f5118baf2aad33f705301f00a01c20801830abcb1f26853158040f40e6fa120980ea420c20af2670edff823aa1f5340b9f2615423a3534e2a2d2b2c0202cc12130201201819020120141502016616170003d1840223f2980bc7a0737d0986d9e52ed9e013c7a21c2b2f002d00a908b5d244a824c8b5d2a5c0b5007404fc02ba1b04a0004f085ba44c78081ba44c3800740835d2b0c026b500bc02f21633c5b332781c75c8f20073c5bd0032600201201a1b02012020210115bbed96d5034705520db3c8340201481c1d0201201e1f0173b11d7420c235c6083e404074c1e08075313b50f614c81e3d039be87ca7f5c2ffd78c7e443ca82b807d01085ba4d6dc4cb83e405636cf0069006031003daeda80e800e800fa02017a0211fc8080fc80dd794ff805e47a0000e78b64c00015ae19574100d56676a1ec40020120222302014824250151b7255b678626466a4610081e81cdf431c24d845a4000331a61e62e005ae0261c0b6fee1c0b77746e102d0185b5599b6786abe06fedb1c68a2270081e8f8df4a411c4605a400031c34410021ae424bae064f613990039e2ca840090081e886052261c52261c52265c4036625ccd88302d02012026270203993828290111ac1a6d9e2f81b609402d0015adf94100cc9576a1ec1840010da936cf0557c1602d0015addc2ce0806ab33b50f6200220db3c02f265f8005043714313db3ced542d34000ad3ffd3073004a0db3c2fae5320b0f26212b102a425b3531cb9b0258100e1aa23a028bcb0f269820186a0f8010597021110023e3e308e8d11101fdb3c40d778f44310bd05e254165b5473e7561053dcdb3c54710a547abc2e2f32300020ed44d0d31fd307d307d33ff404f404d10048018e1a30d20001f2a3d307d3075003d70120f90105f90115baf2a45003e06c2170542013000c01c8cbffcb0704d6db3ced54f80f70256e5389beb198106e102d50c75f078f1b30542403504ddb3c5055a046501049103a4b0953b9db3c5054167fe2f800078325a18e2c268040f4966fa52094305303b9de208e1638393908d2000197d3073016f007059130e27f080705926c31e2b3e63006343132330060708e2903d08308d718d307f40430531678f40e6fa1f2a5d70bff544544f910f2a6ae5220b15203bd14a1236ee66c2232007e5230be8e205f03f8009322d74a9802d307d402fb0002e83270c8ca0040148040f44302f0078e1771c8cb0014cb0712cb0758cf0158cf1640138040f44301e201208e8a104510344300db3ced54925f06e234001cc8cb1fcb07cb07cb3ff400f400c9
```

[–†–∞—Å–ø–∞—Ä—Å–∏–º —ç—Ç–æ—Ç BoC](#bag-of-cells) –∏ –ø–æ–ª—É—á–∏–º 

<details>
  <summary>–±–æ–ª—å—à—É—é —è—á–µ–π–∫—É</summary>
  
  ```
  473[C0021137B0BC47669B3267F1DE70CBB0CEF5C728B8D8C7890451E8613B2D899827026A886043179D3F6000006E233BE8722201D7D239DBA7D818130_] -> {
    80[FF00F4A413F4BCF2C80B] -> {
      2[0_] -> {
        4[4_] -> {
          8[CC] -> {
            2[0_] -> {
              13[D180],
              141[F2980BC7A0737D0986D9E52ED9E013C7A218] -> {
                40[D3FFD30730],
                48[01C8CBFFCB07]
              }
            },
            6[64] -> {
              178[00A908B5D244A824C8B5D2A5C0B5007404FC02BA1B048_],
              314[085BA44C78081BA44C3800740835D2B0C026B500BC02F21633C5B332781C75C8F20073C5BD00324_]
            }
          },
          2[0_] -> {
            2[0_] -> {
              84[BBED96D5034705520DB3C_] -> {
                112[C8CB1FCB07CB07CB3FF400F400C9]
              },
              4[4_] -> {
                2[0_] -> {
                  241[AEDA80E800E800FA02017A0211FC8080FC80DD794FF805E47A0000E78B648_],
                  81[AE19574100D56676A1EC0_]
                },
                458[B11D7420C235C6083E404074C1E08075313B50F614C81E3D039BE87CA7F5C2FFD78C7E443CA82B807D01085BA4D6DC4CB83E405636CF0069004_] -> {
                  384[708E2903D08308D718D307F40430531678F40E6FA1F2A5D70BFF544544F910F2A6AE5220B15203BD14A1236EE66C2232]
                }
              }
            },
            2[0_] -> {
              2[0_] -> {
                323[B7255B678626466A4610081E81CDF431C24D845A4000331A61E62E005AE0261C0B6FEE1C0B77746E0_] -> {
                  128[ED44D0D31FD307D307D33FF404F404D1]
                },
                531[B5599B6786ABE06FEDB1C68A2270081E8F8DF4A411C4605A400031C34410021AE424BAE064F613990039E2CA840090081E886052261C52261C52265C4036625CCD882_] -> {
                  128[ED44D0D31FD307D307D33FF404F404D1]
                }
              },
              4[4_] -> {
                2[0_] -> {
                  65[AC1A6D9E2F81B6090_] -> {
                    128[ED44D0D31FD307D307D33FF404F404D1]
                  },
                  81[ADF94100CC9576A1EC180_]
                },
                12[993_] -> {
                  50[A936CF0557C14_] -> {
                    128[ED44D0D31FD307D307D33FF404F404D1]
                  },
                  82[ADDC2CE0806AB33B50F60_]
                }
              }
            }
          }
        },
        872[F220C7008E8330DB3CE08308D71820F90101D307DB3C22C00013A1537178F40E6FA1F29FDB3C541ABAF910F2A006F40420F90101D31F5118BAF2AAD33F705301F00A01C20801830ABCB1F26853158040F40E6FA120980EA420C20AF2670EDFF823AA1F5340B9F2615423A3534E] -> {
          128[DB3C02F265F8005043714313DB3CED54] -> {
            128[ED44D0D31FD307D307D33FF404F404D1],
            112[C8CB1FCB07CB07CB3FF400F400C9]
          },
          128[ED44D0D31FD307D307D33FF404F404D1],
          40[D3FFD30730],
          640[DB3C2FAE5320B0F26212B102A425B3531CB9B0258100E1AA23A028BCB0F269820186A0F8010597021110023E3E308E8D11101FDB3C40D778F44310BD05E254165B5473E7561053DCDB3C54710A547ABC] -> {
            288[018E1A30D20001F2A3D307D3075003D70120F90105F90115BAF2A45003E06C2170542013],
            48[01C8CBFFCB07],
            504[5230BE8E205F03F8009322D74A9802D307D402FB0002E83270C8CA0040148040F44302F0078E1771C8CB0014CB0712CB0758CF0158CF1640138040F44301E2],
            856[DB3CED54F80F70256E5389BEB198106E102D50C75F078F1B30542403504DDB3C5055A046501049103A4B0953B9DB3C5054167FE2F800078325A18E2C268040F4966FA52094305303B9DE208E1638393908D2000197D3073016F007059130E27F080705926C31E2B3E63006] -> {
              112[C8CB1FCB07CB07CB3FF400F400C9],
              384[708E2903D08308D718D307F40430531678F40E6FA1F2A5D70BFF544544F910F2A6AE5220B15203BD14A1236EE66C2232],
              504[5230BE8E205F03F8009322D74A9802D307D402FB0002E83270C8CA0040148040F44302F0078E1771C8CB0014CB0712CB0758CF0158CF1640138040F44301E2],
              128[8E8A104510344300DB3CED54925F06E2] -> {
                112[C8CB1FCB07CB07CB3FF400F400C9]
              }
            }
          }
        }
      }
    },
    114[0000000105036248628D00000000C_] -> {
      7[CA] -> {
        2[0_] -> {
          2[0_] -> {
            266[2C915453C736B7692B5B4C76F3A90E6AEEC7A02DE9876C8A5EEE589C104723A1800_],
            266[07776CD691FBE13E891ED6DBD15461C098B1B95C822AF605BE8DC331E7D45571000_]
          },
          2[0_] -> {
            266[3817DC8DE305734B0C8A3AD05264E9765A04A39DBE03DD9973AA612A61F766D7C00_],
            266[1F8C67147CEBA1700D3503E54C0820F965F4F82E5210E9A3224A776C8F3FAD18400_]
          }
        },
        269[D218D748BC4D4F4FF93481FD41C39945D5587B8E2AA2D8A35EAF99EEE92D9BA96000]
      },
      74[A03128BB16000000000_]
    }
  }
  ```

</details>

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —è—á–µ–π–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å TL-B —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
```
account_none$0 = Account;

account$1 addr:MsgAddressInt storage_stat:StorageInfo
          storage:AccountStorage = Account;
```
–ù–∞—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ, —Ç–∞–∫–∏–µ –∫–∞–∫:
```
anycast_info$_ depth:(#<= 30) { depth >= 1 } rewrite_pfx:(bits depth) = Anycast;
addr_std$10 anycast:(Maybe Anycast) workchain_id:int8 address:bits256  = MsgAddressInt;
addr_var$11 anycast:(Maybe Anycast) addr_len:(## 9) workchain_id:int32 address:(bits addr_len) = MsgAddressInt;
   
storage_info$_ used:StorageUsed last_paid:uint32 due_payment:(Maybe Grams) = StorageInfo;
storage_used$_ cells:(VarUInteger 7) bits:(VarUInteger 7) public_cells:(VarUInteger 7) = StorageUsed;
  
account_storage$_ last_trans_lt:uint64 balance:CurrencyCollection state:AccountState = AccountStorage;

currencies$_ grams:Grams other:ExtraCurrencyCollection = CurrencyCollection;
           
var_uint$_ {n:#} len:(#< n) value:(uint (len * 8)) = VarUInteger n;
var_int$_ {n:#} len:(#< n) value:(int (len * 8)) = VarInteger n;
nanograms$_ amount:(VarUInteger 16) = Grams;  
           
account_uninit$00 = AccountState;
account_active$1 _:StateInit = AccountState;
account_frozen$01 state_hash:bits256 = AccountState;
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º —è—á–µ–π–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–µ–π—Å—ã, –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø—É—Ç–∏, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Ä–∞–∑—Ä–±—Ä–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.

–ù–∞—á–Ω–µ–º –ø–∞—Ä—Å–∏–Ω–≥. –í –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–Ω–µ–≤–æ–π —è—á–µ–π–∫–∏ –º—ã –∏–º–µ–µ–º:
```
C0021137B0BC47669B3267F1DE70CBB0CEF5C728B8D8C7890451E8613B2D899827026A886043179D3F6000006E233BE8722201D7D239DBA7D818130_
```
–ü–µ—Ä–µ–≤–µ–¥–µ–º –≤ –±–∏–Ω–∞—Ä–Ω—ã–π –≤–∏–¥ –∏ –ø–æ–ª—É—á–∏–º:
```
11000000000000100001000100110111101100001011110001000111011001101001101100110010011001111111000111011110011100001100101110110000110011101111010111000111001010001011100011011000110001111000100100000100010100011110100001100001001110110010110110001001100110000010011100000010011010101000100001100000010000110001011110011101001111110110000000000000000000000110111000100011001110111110100001110010001000100000000111010111110100100011100111011011101001111101100000011000000100110
```
–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –Ω–∞—à—É –æ—Å–Ω–æ–≤–Ω—É—é TL-B —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –º—ã –≤–∏–¥–∏–º —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —á—Ç–æ —Ç–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å - `account_none$0` –∏–ª–∏ `account$1`. –ü–æ–Ω—è—Ç—å –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —É –Ω–∞—Å –º—ã –º–æ–∂–µ–º –ø—Ä–æ—á–∏—Ç–∞–≤ –ø–µ—Ä—Ñ–∏–∫—Å –∑–∞—è–≤–ª–µ–Ω—ã–π –ø–æ—Å–ª–µ —Å–∏–º–≤–æ–ª–∞ $, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ 1 –±–∏—Ç, –µ—Å–ª–∏ —Ç–∞–º 0, —Ç–æ —É –Ω–∞—Å `account_none`, –µ—Å–ª–∏ 1, —Ç–æ `account`. 

–ù–∞—à –ø–µ—Ä–≤—ã–π –±–∏—Ç –∏–∑ –¥–∞–Ω–Ω—ã—Ö –≤—ã—à–µ = 1, –∑–Ω–∞—á–∏—Ç –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å `account$1` –∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ö–µ–º—É:
```
account$1 addr:MsgAddressInt storage_stat:StorageInfo
          storage:AccountStorage = Account;
```
–î–∞–ª–µ–µ —É –Ω–∞—Å –∏–¥–µ—Ç `addr:MsgAddressInt`, –º—ã –≤–∏–¥–∏–º —á—Ç–æ –¥–ª—è MsgAddressInt —É –Ω–∞—Å —Ç–æ–∂–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
```
addr_std$10 anycast:(Maybe Anycast) workchain_id:int8 address:bits256  = MsgAddressInt;
addr_var$11 anycast:(Maybe Anycast) addr_len:(## 9) workchain_id:int32 address:(bits addr_len) = MsgAddressInt;
```
–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —Å –∫–∞–∫–∏–º –∏–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –º—ã, –∫–∞–∫ –∏ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑, —á–∏—Ç–∞–µ–º –±–∏—Ç—ã –ø—Ä–µ—Ñ–∏–∫—Å–∞, –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã —á–∏—Ç–∞–µ–º 2 –±–∏—Ç–∞. –û—Ç—Ä–µ–∑–∞–µ–º —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã–π –±–∏—Ç, –æ—Å—Ç–∞–µ—Ç—Å—è `1000000...`, —á–∏—Ç–∞–µ–º –ø–µ—Ä–≤—ã–µ 2 –±–∏—Ç–∞ –∏ –ø–æ–ª—É—á–∞–µ–º `10`, –∑–Ω–∞—á–∏—Ç –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å `addr_std$10`.

–°–ª–µ–¥—É—é—â–∏–º –º—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å `anycast:(Maybe Anycast)`, Maybe –∑–Ω–∞—á–∏—Ç —á—Ç–æ –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å 1 –±–∏—Ç, –∏ –µ—Å–ª–∏ —Ç–∞–º –µ–¥–∏–Ω–∏—Ü–∞ - —á–∏—Ç–∞—Ç—å Anycast, –∏–Ω–∞—á–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å. –ù–∞—à–∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –±–∏—Ç—ã —ç—Ç–æ `00000...`, —á–∏—Ç–∞–µ–º 1 –±–∏—Ç, —ç—Ç–æ 0, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ–º Anycast.

–î–∞–ª–µ–µ —É –Ω–∞—Å –∏–¥–µ—Ç `workchain_id:int8`, —Ç—É—Ç –≤—Å–µ –ø—Ä–æ—Å—Ç–æ, —á–∏—Ç–∞–µ–º 8 –±–∏—Ç, —ç—Ç–æ –±—É–¥–µ—Ç –∞–π–¥–∏ –≤–æ—Ä–∫—á–µ–∏–Ω–∞. –ß–∏—Ç–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ 8 –±–∏—Ç, –≤—Å–µ –Ω—É–ª–∏, –∑–Ω–∞—á–∏—Ç –≤–æ—Ä–∫—á–µ–∏–Ω —Ä–∞–≤–µ–Ω 0.

–î–∞–ª–µ–µ —á–∏—Ç–∞–µ–º `address:bits256`, —ç—Ç–æ 256 –±–∏—Ç –∞–¥—Ä–µ—Å–∞, –ø–æ —Ç–æ–º—É –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø—É —á—Ç–æ –∏ —Å `workchain_id`. –ü—Ä–æ—á–∏—Ç–∞–≤ - –º—ã –ø–æ–ª—É—á–∏–º `21137B0BC47669B3267F1DE70CBB0CEF5C728B8D8C7890451E8613B2D8998270` –≤ hex –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏.



–ú—ã –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –∞–¥—Ä–µ—Å `addr:MsgAddressInt`, –¥–∞–ª–µ–µ —É –Ω–∞—Å –∏–¥–µ—Ç `storage_stat:StorageInfo` –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –µ–≥–æ —Å—Ö–µ–º–∞:
```
storage_info$_ used:StorageUsed last_paid:uint32 due_payment:(Maybe Grams) = StorageInfo;
```
–ü–µ—Ä–≤—ã–º –∏–¥–µ—Ç `used:StorageUsed`, —Å–æ —Å—Ö–µ–º–æ–π:
```
storage_used$_ cells:(VarUInteger 7) bits:(VarUInteger 7) public_cells:(VarUInteger 7) = StorageUsed;
```
–≠—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —è—á–µ–µ–∫ –∏ –±–∏—Ç–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞. –ö–∞–∂–¥–æ–µ –ø–æ–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ `VarUInteger 7`, —á—Ç–æ –∑–Ω–∞—á–∏—Ç uint –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –Ω–æ –º–∞–∫—Å–∏–º—É–º 7 –±–∏—Ç. –ü–æ–Ω—è—Ç—å –∫–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω –º–æ–∂–Ω–æ –ø–æ —Å—Ö–µ–º–µ:
```
var_uint$_ {n:#} len:(#< n) value:(uint (len * 8)) = VarUInteger n;
```
–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ n –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 7. –í len —É –Ω–∞—Å –±—É–¥–µ—Ç `(#< 7)` —á—Ç–æ –∑–Ω–∞—á–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç –∫–æ—Ç–æ—Ä–æ–µ –≤–º–µ—â–∞–µ—Ç —á–∏—Å–ª–æ –¥–æ 7, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ–¥—è 7-1=6 –≤ –±–∏–Ω–∞—Ä–Ω—ã–π –≤–∏–¥ - `110`, –ø–æ–ª—É—á–∞–µ–º 3 –±–∏—Ç–∞, –∑–Ω–∞—á–∏—Ç –¥–ª–∏–Ω–∞ len = 3 –±–∏—Ç–∞. –ê value —ç—Ç–æ `(uint (len * 8))`. –ß—Ç–æ–±—ã –µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å 3 –±–∏—Ç–∞ –¥–ª–∏–Ω—ã, –ø–æ–ª—É—á–∏—Ç—å —á–∏—Å–ª–æ –∏ —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞ 8, —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—Ä `value`, —Ç–æ–µ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç–æ–≤ –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è VarUInteger.

–ü—Ä–æ—á–∏—Ç–∞–µ–º `cells:(VarUInteger 7)`, –≤–æ–∑—å–º–µ–º –Ω–∞—à–∏ —Å–ª–µ–¥—É—é—â–∏–µ –±–∏—Ç—ã –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π —è—á–µ–π–∫–∏, –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ 16 –±–∏—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, —ç—Ç–æ `0010011010101000`. –ß–∏—Ç–∞–µ–º –ø–µ—Ä–≤—ã–µ 3 –±–∏—Ç–∞ len, —ç—Ç–æ `001`, —Ç–æ–µ—Å—Ç—å 1, –ø–æ–ª—É—á–∏–º —Ä–∞–∑–º–µ—Ä (uint (1 * 8)), –ø–æ–ª—É—á–∏–º uint 8, —á–∏—Ç–∞–µ–º 8 –±–∏—Ç, —ç—Ç–æ –±—É–¥–µ—Ç `cells`, `00110101`, —Ç–æ–µ—Å—Ç—å 53 –≤ –¥–µ—Å—è—Ç–∏—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ. –î–µ–ª–∞–µ–º —Ç–æ–∂–µ —Å–∞–º–æ–µ –¥–ª—è `bits` –∏ `public_cells`.

–ú—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ `used:StorageUsed`, —Å–ª–µ–¥—É—é—â–∏–º —É –Ω–∞—Å –∏–¥–µ—Ç `last_paid:uint32`, —Ç—É—Ç –≤—Å–µ –ø—Ä–æ—Å—Ç–æ, —á–∏—Ç–∞–µ–º 32 –±–∏—Ç–∞. –¢–∞–∫ –∂–µ –≤—Å–µ –ø—Ä–æ—Å—Ç–æ —Å `due_payment:(Maybe Grams)` —Ç—É—Ç –º–µ–π–±–∏ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç 0, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ Grams –º—ã –ø—Ä–æ–ø—É—Å–∫–∞–µ–º. –ù–æ –µ—Å–ª–∏ –±—ã –º–µ–π–±–∏ –±—ã–ª —Ä–∞–≤–µ–Ω 1, –º—ã –º–æ–∂–µ–º –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ —Å—Ö–µ–º—É Grams `amount:(VarUInteger 16) = Grams` –∏ —Å—Ä–∞–∑—É –ø–æ–π–º–µ–º —á—Ç–æ –º—ã —É–∂–µ —É–º–µ–µ–º —Å —Ç–∞–∫–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å. –ö–∞–∫ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑, —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ 7 —É –Ω–∞—Å 16.

–î–∞–ª–µ–µ —É –Ω–∞—Å `storage:AccountStorage` —Å–æ —Å—Ö–µ–º–æ–π:
```
account_storage$_ last_trans_lt:uint64 balance:CurrencyCollection state:AccountState = AccountStorage;
```
–ß–∏—Ç–∞–µ–º `last_trans_lt:uint64`, —ç—Ç–æ 64 –±–∏—Ç–∞ —Ö—Ä–∞–Ω—è—â–∏–µ lt –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞. –ò –Ω–∞–∫–æ–Ω–µ—Ü –±–∞–ª–∞–Ω—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã–π —Å—Ö–µ–º–æ–π:
```
currencies$_ grams:Grams other:ExtraCurrencyCollection = CurrencyCollection;
```
–û—Ç—Å—é–¥–∞ –º—ã –ø—Ä–æ—á–∏—Ç–∞–µ–º `grams:Grams` –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è –±–∞–ª–∞–Ω—Å–æ–º –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –Ω–∞–Ω–æ-—Ç–æ–Ω–∞—Ö.
`grams:Grams` —ç—Ç–æ `VarUInteger 16`, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è 16 (–≤ –±–∏–Ω–∞—Ä–Ω–æ–º –≤–∏–¥–µ `10000`, –æ—Ç–Ω—è–≤ 1 –ø–æ–ª—É—á–∏–º `1111`) –∑–Ω–∞—á–∏—Ç —á–∏—Ç–∞–µ–º –ø–µ—Ä–≤—ã–µ 4 –±–∏—Ç–∞, –∏ –ø–æ–ª—É—á–µ–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 8, –¥–∞–ª–µ–µ —á–∏—Ç–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç, —ç—Ç–æ –∏ –±—É–¥–µ—Ç –Ω–∞—à–∏–º –±–∞–ª–∞–Ω—Å–æ–º. 

–†–∞–∑–±–µ—Ä–µ–º –Ω–∞ –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—à–∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –±–∏—Ç—ã:
```
100000000111010111110100100011100111011011101001111101100000011000000100110
```
–ß–∏—Ç–∞–µ–º –ø–µ—Ä–≤—ã–µ 4 –±–∏—Ç–∞ - `1000`, —ç—Ç–æ 8. 8*8=64, —á–∏—Ç–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ 64 –±–∏—Ç–∞ = `0000011101011111010010001110011101101110100111110110000001100000`, —É–±—Ä–∞–≤ –ª–∏—à–Ω–∏–µ –Ω—É–ª–µ–≤—ã–µ –±–∏—Ç—ã –ø–æ–ª—É—á–∏–º `11101011111010010001110011101101110100111110110000001100000`, —á—Ç–æ —Ä–∞–≤–Ω–æ `531223439883591776`, –∏ –ø–µ—Ä–µ–≤–µ–¥—è –∏–∑ –Ω–∞–Ω–æ –≤ —Ç–æ–Ω –ø–æ–ª—É—á–∞–µ–º `531223439.883591776`.

–ù–∞ —ç—Ç–æ–º –º—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ —Ä–∞–∑–æ–±—Ä–∞–ª–∏ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–µ–π—Å—ã, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å —Ç–µ–º —á—Ç–æ –º—ã —Ä–∞–∑–±—Ä–∞–ª–∏. –¢–∞–∫ –∂–µ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Ä–∞–∑–æ–±—Ä—É TL-B –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [–æ—Ñ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://ton.org/docs/#/overviews/TL-B)

##### –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã
–¢–µ–ø–µ—Ä—å, –∏–∑—É—á–∏–≤ –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –∏ –æ—Ç –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤ lite-server'–∞. –ü—Ä–∏–Ω—Ü–∏–ø —Ç–æ—Ç –∂–µ :)

### –ê–¥—Ä–µ—Å–∞

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –≤–∏–¥–∞ `EQBL2_3lMiyywU17g-or8N7v9hDmPCpttzBPE2isF2GTzpK4` —è–≤–ª—è–µ—Ç—Å—è –±–∞–π—Ç–∞–º–∏ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ base64 uri. 
–ï–≥–æ –¥–ª–∏–Ω–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 36 –±–∞–π—Ç, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö - —á–µ–∫—Å—É–º–º–∞ crc16 —Å —Ç–∞–±–ª–∏—Ü–µ–π XMODEM. –ü–µ—Ä–≤—ã–π –±–∞–π—Ç - —Ñ–ª–∞–≥–∏, –≤—Ç–æ—Ä–æ–π - –≤–æ—Ä–∫—á–µ–∏–Ω. 
32 –±–∞–π—Ç–∞ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ - –¥–∞–Ω–Ω—ã–µ —Å–∞–º–æ–≥–æ –∞–¥—Ä–µ—Å–∞, –≤ —Å—Ö–µ–º–∞—Ö —á–∞—Å—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ int256.

[–ü—Ä–∏–º–µ—Ä –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è](https://github.com/xssnick/tonutils-go/blob/3d9ee052689376061bf7e4a22037ff131183afad/address/addr.go#L156)

### Bag of Cells
Bag of Cells - —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —è—á–µ–µ–∫ (cells) –≤ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –≤–∏–¥–µ [TL-B —Å—Ö–µ–º—ã](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/tl/boc.tlb#L25).

#### –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —è—á–µ–µ–∫
–†–∞–∑–±–µ—Ä–µ–º —è—á–µ–π–∫—É –≤–∏–¥–∞:
```
1[8_] -> {
  24[0AAAAA],
  7[FE] -> {
    24[0AAAAA]
  }
}
```
–¢—É—Ç –º—ã –∏–º–µ–µ–º –∫–æ—Ä–Ω–µ–≤—É—é —è—á–µ–π–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 1 –±–∏—Ç, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç 2 —Å—Å—ã–ª–∫–∏: –ø–µ—Ä–≤–∞—è –Ω–∞ —è—á–µ–π–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 24 –±–∏—Ç–∞ –∏ –≤—Ç–æ—Ä–∞—è –Ω–∞ —è—á–µ–π–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 7 –±–∏—Ç, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç 1 —Å—Å—ã–ª–∫—É –Ω–∞ —è—á–µ–π–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 24 –±–∏—Ç–∞.

–ù–∞–º –Ω—É–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —è—á–µ–π–∫–∏ –≤ –ø–ª–æ—Å–∫–∏–π –Ω–∞–±–æ—Ä –±–∞–π—Ç–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —è—á–µ–π–∫–∏ - –∏—Ö —É –Ω–∞—Å 3 –∏–∑ 4—Ö. –ò–º–µ–µ–º:
```
1[8_]
24[0AAAAA]
7[FE]
```
–¢–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–ª–æ–∂–∏–º –∏—Ö –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ–±—ã —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —è—á–µ–π–∫–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–∞–∑–∞–¥. –¢–∞ —è—á–µ–π–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –ø–æ—Å–ª–µ —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –Ω–µ–µ —É–∫–∞–∑—ã–≤–∞—é—Ç. –ü–æ–ª—É—á–∞–µ–º:
```
1[8_]      -> –∏–Ω–¥–µ–∫—Å 0 (–∫–æ—Ä–Ω–µ–≤–∞—è —è—á–µ–π–∫–∞)
7[FE]      -> –∏–Ω–¥–µ–∫—Å 1
24[0AAAAA] -> –∏–Ω–¥–µ–∫—Å 2
```

–ü–æ—Å—á–∏—Ç–∞–µ–º –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö. –≠—Ç–æ 2 –±–∞–π—Ç–∞, —Ö—Ä–∞–Ω—è—â–∏–µ —Ñ–ª–∞–≥–∏, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–ª–∏–Ω–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Å—ã–ª–æ–∫. –§–ª–∞–≥–∏ –±—É–¥—É—Ç –æ–ø—É—â–µ–Ω—ã –≤ —Ç–µ–∫—É—â–µ–º —Ä–∞–∑–±–æ—Ä–µ, –æ–Ω–∏ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ 0. –ü–µ—Ä–≤—ã–π –±–∞–π—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 5 –±–∏—Ç–æ–≤ —Ñ–ª–∞–≥–æ–≤ –∏ 3 –±–∏—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Å—ã–ª–æ–∫. –í—Ç–æ—Ä–æ–π –±–∞–π—Ç - –¥–ª–∏–Ω—É –ø–æ–ª–Ω—ã—Ö 4—Ö –±–∏—Ç–Ω—ã—Ö –≥—Ä—É–ø–ø (–Ω–æ –º–∏–Ω–∏–º—É–º 1, –µ—Å–ª–∏ –Ω–µ –ø—É—Å—Ç–æ). –ü–æ–ª—É—á–∞–µ–º:
```
1[8_]      -> 0201 -> 2 —Å—Å—ã–ª–∫–∏, –¥–ª–∏–Ω–∞ 1 
7[FE]      -> 0101 -> 1 —Å—Å—ã–ª–∫–∞, –¥–ª–∏–Ω–∞ 1
24[0AAAAA] -> 0006 -> 0 —Å—Å—ã–ª–æ–∫, –¥–ª–∏–Ω–∞ 6
```
–î–ª—è –¥–∞–Ω–Ω—ã—Ö —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ 4—Ö –±–∏—Ç–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è 1 –±–∏—Ç –≤ –∫–æ–Ω–µ—Ü. –û–Ω –æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π –±–∏—Ç –≥—Ä—É–ø–ø—ã –∏ —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ–ø–æ–ª–Ω—ã—Ö –≥—Ä—É–ø–ø. –î–æ–±–∞–≤–∏–º –µ–≥–æ:
```
1[8_]      -> C0     -> 0b10000000->0b11000000
7[FE]      -> FF     -> 0b11111110->0b11111111
24[0AAAAA] -> 0AAAAA -> –Ω–µ –º–µ–Ω—è–µ–º (–ø–æ–ª–Ω—ã–µ –≥—Ä—É–ø–ø—ã)
```

–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º –∏–Ω–¥–µ–∫—Å—ã —Å—Å—ã–ª–æ–∫:
```
0 1[8_]      -> 0201 -> —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ 2 —è—á–µ–π–∫–∏ —Å —Ç–∞–∫–∏–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
1 7[FE]      -> 02 -> —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —è—á–µ–π–∫–∏ —Å –∏–Ω–¥–µ–∫—Å–æ–º 2
2 24[0AAAAA] -> –Ω–µ—Ç —Å—Å—ã–ª–æ–∫
```

–ò —Å–æ–±–µ—Ä–µ–º –≤—Å–µ –≤–º–µ—Å—Ç–µ:
```
0201 C0     0201  
0101 AA     02
0006 0AAAAA 
```

–ò —Å–∫–ª–µ–∏–º –≤ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç:
`0201c002010101ff0200060aaaaa`, —Ä–∞–∑–º–µ—Ä 14 –±–∞–π—Ç.

[–ü—Ä–∏–º–µ—Ä —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏](https://github.com/xssnick/tonutils-go/blob/3d9ee052689376061bf7e4a22037ff131183afad/tvm/cell/serialize.go#L205)

#### –£–ø–∞–∫–æ–≤–∫–∞ –≤ BoC
–£–ø–∞–∫—É–µ–º —è—á–µ–π–∫—É –∏–∑ –ø—Ä–æ—à–ª–æ–π –≥–ª–∞–≤—ã. –ú—ã —É–∂–µ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–ª–∏ –µ–µ –≤ –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –±–∞–π—Ç –¥–ª–∏–Ω–æ–π 14.

–°—Ç—Ä–æ–∏–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–≥–ª–∞—Å–Ω–æ [—Å—Ö–µ–º–µ](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/tl/boc.tlb#L25).

```
b5ee9c72                      -> id tl-b —Å—Ç—Ä—É–∫—Ç—É—Ä—ã BoC
01                            -> —Ñ–ª–∞–≥–∏ –∏ —Ä–∞–∑–º–µ—Ä size:(## 3), –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Ñ–ª–∞–≥–∏ –≤—Å–µ 0, 
                                 –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –Ω—É–∂–Ω–æ–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è—á–µ–µ–∫ - 1.
                                 –ø–æ–ª—É—á–∞–µ–º - 0b0_0_0_00_001
01                            -> –∫–æ–ª-–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã—Ö —è—á–µ–µ–∫
03                            -> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—á–µ–µ–∫, 1 –±–∞–π—Ç (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è 3 –±–∏—Ç–∞–º–∏ size:(## 3), —Ä–∞–≤–Ω—ã–π 3–º.
01                            -> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–Ω–µ–≤—ã—Ö —è—á–µ–µ–∫ - 1
00                            -> absent, –≤—Å–µ–≥–¥–∞ 0 (–≤ —Ç–µ–∫—É—â–∏—Ö –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è—Ö)
0e                            -> —Ä–∞–∑–º–µ—Ä —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã—Ö —è—á–µ–µ–∫, 1 –±–∞–π—Ç (—Ä–∞–∑–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤—ã—à–µ), —Ä–∞–≤–Ω—ã–π 14
00                            -> –∏–Ω–¥–µ–∫—Å –∫–æ—Ä–Ω–µ–≤–æ–π —è—á–µ–π–∫–∏, —Ä–∞–∑–º–µ—Ä–æ–º 1 (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è 3 –±–∏—Ç–∞–º–∏ size:(## 3) –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞), 
                                 –≤—Å–µ–≥–¥–∞ 0
0201c002010101ff0200060aaaaa  -> —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã–µ —è—á–µ–π–∫–∏
```

–í—Å—ë, —á—Ç–æ –≤—ã—à–µ, —Å–∫–ª–µ–∏–º –≤ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç–æ–≤ –∏ –ø–æ–ª—É—á–∏–º:
`b5ee9c7201010301000e000201c002010101ff0200060aaaaa` –≠—Ç–æ –Ω–∞—à —Ñ–∏–Ω–∞–ª—å–Ω—ã–π BoC!

–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ BoC: [–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è](https://github.com/xssnick/tonutils-go/blob/master/tvm/cell/serialize.go), [–î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è](https://github.com/xssnick/tonutils-go/blob/master/tvm/cell/parse.go)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ö–µ–Ω–¥—à–µ–π–∫–∞

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–π–¥–∏ –∫–ª—é—á–∞
–ê–π–¥–∏ –∫–ª—é—á–∞ - —ç—Ç–æ SHA256 —Ö—ç—à –æ—Ç 4 –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –±–∞–π—Ç **[0xC6, 0xB4, 0x13, 0x48]** –∏ **–ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞**

[–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞](https://github.com/xssnick/tonutils-go/blob/2b5e5a0e6ceaf3f28309b0833cb45de81c580acc/liteclient/crypto.go#L16)

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Handshake –ø–∞–∫–µ—Ç–∞
–•—ç–Ω–¥—à–µ–π–∫ –ø–∞–∫–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ 160 –±–∞–π—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —à–∏—Ñ—Ä–∞—Ö.

–ß—Ç–æ–±—ã –∏—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å, –Ω–∞–º –Ω—É–∂–µ–Ω AES-CTR —à–∏—Ñ—Ä, –¥–ª—è –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–º –Ω—É–∂–µ–Ω SHA256 —Ö—ç—à –æ—Ç 160 –±–∞–π—Ç –∏ [–æ–±—â–∏–π –∫–ª—é—á ECDH](#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%89%D0%B5%D0%B3%D0%BE-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0-%D0%BF%D0%BE-ecdh)

–®–∏—Ñ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
* –∫–ª—é—á = (0 - 15 –±–∞–π—Ç—ã –æ–±—â–µ–≥–æ –∫–ª—é—á–∞) + (16 - 31 –±–∞–π—Ç—ã —Ö—ç—à–∞)
* iv   = (0 - 3 –±–∞–π—Ç—ã —Ö—ç—à–∞) + (20 - 31 –±–∞–π—Ç—ã –æ–±—â–µ–≥–æ –∫–ª—é—á–∞)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —à–∏—Ñ—Ä —Å–æ–±—Ä–∞–Ω, –º—ã —à–∏—Ñ—Ä—É–µ–º –∏–º –Ω–∞—à–∏ 160 –±–∞–π—Ç.

[–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞](https://github.com/xssnick/tonutils-go/blob/2b5e5a0e6ceaf3f28309b0833cb45de81c580acc/liteclient/connection.go#L361)

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–ª—é—á–∞ –ø–æ ECDH
–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–±—â–µ–≥–æ –∫–ª—é—á–∞ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞—à –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞. 

–°—É—Ç—å DH –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, –±–µ–∑ —Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ü—Ä–∏–≤–µ–¥—É –ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ.
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—â–∏–π –∫–ª—é—á –º–µ–∂–¥—É –Ω–∞–º–∏ –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, –ø—Ä–æ—Ü–µ—Å—Å –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
1. –ú—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –∏ –ø—É–±–ª–∏—á–Ω–æ–µ —á–∏—Å–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä **6** –∏ **7**
2. –°–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –∏ –ø—É–±–ª–∏—á–Ω–æ–µ —á–∏—Å–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä **5** –∏ **15**
3. –ú—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º –æ–±–º–µ–Ω–∏–≤–∞–µ–º—Å—è –ø—É–±–ª–∏—á–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä—É **7**, –æ–Ω –Ω–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **15**.
4. –ú—ã –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ–º: **7^6 mod 15 = 4**
5. –°–µ—Ä–≤–µ—Ä –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç: **7^5 mod 15 = 7**
6. –û–±–º–µ–Ω–∏–≤–∞–µ–º—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏, –º—ã —Å–µ—Ä–≤–µ—Ä—É **4**, –æ–Ω –Ω–∞–º **7**
7. –ú—ã –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ–º **7^6 mod 15 = 4**
8. –°–µ—Ä–≤–µ—Ä –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç: **4^5 mod 15 = 4**
9. –û–±—â–∏–π –∫–ª—é—á = **4**

–î–µ—Ç–∞–ª–∏ —Å–∞–º–æ–≥–æ ECDH –±—É–¥—É—Ç –æ–ø—É—â–µ–Ω—ã, —á—Ç–æ–±—ã –Ω–µ —É—Å–ª–æ–∂–Ω—è—Ç—å –ø—Ä–æ—á—Ç–µ–Ω–∏–µ. –û–Ω –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é 2 –∫–ª—é—á–µ–π, –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ, –ø—É—Ç–µ–º –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –æ–±—â–µ–π —Ç–æ—á–∫–∏ –Ω–∞ –∫—Ä–∏–≤–æ–π. –ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —Ç–æ –ª—É—á—à–µ –ø–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ.

[–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞](https://github.com/xssnick/tonutils-go/blob/2b5e5a0e6ceaf3f28309b0833cb45de81c580acc/liteclient/crypto.go#L32)
